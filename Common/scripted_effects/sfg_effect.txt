give_next_ship_size_tech_option_effect = {
	if = {
		limit = { NOT = { has_technology = tech_destroyers } }
		add_research_option = tech_destroyers
		add_tech_progress = {
			tech = tech_destroyers
			progress = 0.1
		}
	}
	else_if = {
		limit = { NOT = { has_technology = tech_cruisers } }
		add_research_option = tech_cruisers
		add_tech_progress = {
			tech = tech_cruisers
			progress = 0.1
		}
	}
	else_if = {
		limit = { NOT = { has_technology = tech_battleships } }
		add_research_option = tech_battleships
		add_tech_progress = {
			tech = tech_battleships
			progress = 0.1
		}
	}
	else_if = {
		limit = { NOT = { has_technology = tech_carriers } }
		add_research_option = tech_carriers
		add_tech_progress = {
			tech = tech_carriers
			progress = 0.1
		}
	}
}
give_next_regular_ship_tech_effect = {
	inverted_switch = {
		trigger = has_technology
		tech_destroyers = {
			add_tech_option_or_research_effect = {
				TECH = tech_destroyers
				PROGRESS = $PROGRESS$
				CATEGORY = engineering_research
			}
		}
		tech_cruisers = {
			add_tech_option_or_research_effect = {
				TECH = tech_cruisers
				PROGRESS = $PROGRESS$
				CATEGORY = engineering_research
			}
		}
		tech_battleships = {
			add_tech_option_or_research_effect = {
				TECH = tech_battleships
				PROGRESS = $PROGRESS$
				CATEGORY = engineering_research
			}
		}
		tech_carriers = {
			add_tech_option_or_research_effect = {
				TECH = tech_carriers
				PROGRESS = $PROGRESS$
				CATEGORY = engineering_research
			}
		}
		default = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}
sfg_gestalt_count_noomicidal = {
	#count_country
	clear_variable = sfg_gestalt_count_noomicidal_count
	clear_variable = sfg_nogestalt_count_noomicidal_count
	every_country={
		limit = { 
			is_gestalt = yes
			is_regular_empire = yes
			is_homicidal = no
		}
		# set_star_flag = sba_quantum_catapult_search_flag
		save_event_target_as = sfg_gestalt_count_noomicidal_$Count|0$
		change_variable = { which = sfg_gestalt_count_noomicidal_count value = 1 }
	}
	every_country={
		limit = { 
			is_gestalt = no
			is_regular_empire = yes
		}
		# set_star_flag = sba_quantum_catapult_search_flag
		save_event_target_as = sfg_nogestalt_count_noomicidal$Count|0$
		change_variable = { which = sfg_nogestalt_count_noomicidal_count value = 1 }
	}
}
# create_sgorbio_archaeologica_site = {
# 	random_system = {
# 		limit = {
# 			any_system_planet = {
# 				is_planet_class = pc_frozen
# 				has_anomaly = no
# 				OR = {
# 					is_colony = no
# 					sapient_pop_amount < 1000
# 				}
# 				NOT = {
# 					exists = archaeological_site
# 				}
# 			}
# 		}
# 		random_system_planet = {
# 			limit = {
# 				is_planet_class = pc_frozen
# 				has_anomaly = no
# 				OR = {
# 					is_colony = no
# 					sapient_pop_amount < 1000
# 				}
# 				NOR = {
# 					exists = archaeological_site
# 				}
# 			}
# 			create_archaeological_site = site_sgorbio
# 			set_name = "Debug_sgorbio"
# 		}
# 	}
# }