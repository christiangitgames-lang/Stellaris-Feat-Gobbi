namespace = cg_ai
#get by phi_ai but best.
#	cg_ai.0	yearly checked - builds up the capital planet of non gestalt empires
#	cg_ai.1	yearly checked - builds up the other planets of non gestalt empires
#   cg_ai.101
#	cg_ai.2	yearly checked - manages unemployed pops of non gestalts empires #obsolete
#	cg_ai.3	yearly checked - transfers pops between capital and colonies for non gestalts empires #obsolete
#	cg_ai.4	yearly checked - market simulator for non gestalts empires
#	cg_ai.5	bi yearly checked - replace district and buildings not gestalt
#	cg_ai.502 remove and replace rares useless districts for habitat
#	cg_ai.6	yearly checked - finds empires lagging behind and flags them
#	cg_ai.7	yearly checked - better starbases
#	cg_ai.8	yearly checked - building assault armies
#	cg_ai.9	monthly checked - destroy "lost cause" starbases
#	cg_ai.10	yearly checked - send alloys to fed prez
#	cg_ai.11	monthly checked - set survive cb in defensive wars when hope is lost
#	cg_ai.12	monthly checked - joins defensive wars of laggers
#	cg_ai.13	5-yearly checked - shifts ethics towards fed type
#	cg_ai.14	monthly checked - scorched earth tactics
#	cg_ai.15	yearly checked - attack bbeg
#	cg_ai.16	yearly checked - market simulator for gestalts empires
#	cg_ai.17	yearly checked - replace the capital planet of gestalt 
#   cg_ai.17   if declare war AI subjucation
#   20-29		Replace Buildings gestalt empire
#	cg_ai.20	yearly checked - replace up building of  gestalt empires
#   30-39		Flags
#	cg_ai.30	yearly checked - Set Flag washuman
#   40-49			Mid Game District update
	#	cg_ai.41	Mid game District update only artificial planet
	#	cg_ai.42	Universally remove/replace pop assembly
	#   cg_ai.43   Universally replace holo
	#	cg_ai.44	YEARLI Universally upgrade buildings
	#	cg_ai.45	universal remove building_bureaucratic_1
	#	cg_ai.46	replace with archeo refinery
#50-59 # five years event
# cg_ai.60 (colonization event ) add building or district universal minimum
# cg_ai.61 #replace district for prepare for ap_arcology_project
# cg_ai.62 # resettle pop for best stability
#100 # market simulation event
#	cg_ai.102 best choice start game
#1000 # planet_event_replace universal
#1001 # replace rare resource capital
#1001 # replace rare resource in all planet.
#	set_colony_type
# OR = {
# 	has_global_flag = AI_hard
# 	has_global_flag = AI_normal
# 	has_global_flag = AI_easy
# }
#universal line for building add:
#inline_script = "building_add/universal" need random list.
#inline_script = "building_add/universalwr" work without random list.
country_event = {
#	cg_ai.0	yearly checked - builds up the capital planet of non-gestalt non-voids empires

	id = cg_ai.0
	hide_window = yes

	is_triggered_only = yes
	trigger = {
		is_ai = yes
		is_country_type = default
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_resource = { type = minerals amount > 500 }
		OR = {
			has_resource = { type = energy amount > 1000 }
			has_monthly_income = { resource = energy value > 20 }
		}
		NOT = { has_global_flag = AI_easy }
	}
	
	immediate = {
		random_owned_planet = {
			limit = {
				is_capital = yes
				NOT = { is_planet_class = pc_habitat }
				OR = {
					owner = { has_monthly_income = { resource = energy value > 0 } }
					AND = {
						free_building_slots <= 0
						num_buildings = { type = any value < 12 }
					}
				}
			}
			if = { # sistema factory inutili ( solo livello 1 )
				limit = { 
					has_building = building_factory_1
					OR = {
						AND = { 
							owner = { has_monthly_income = { resource = consumer_goods value > 20 } }
							owner = { has_resource = { type = consumer_goods amount > 100 } } # la distrugge se ha un ammontare 
						}
						AND = { 
							owner = { has_monthly_income = { resource = consumer_goods value > 0 } }
							owner = { has_resource = { type = consumer_goods amount > 1800 } } # la distrugge se ha un ammontare 
						}
					}
			 	}
				remove_building = building_factory_1
				inline_script = "building_add/capital_universal" #add universal buildings
			}
			else_if = { #commercial zone inutili nella capitale
				limit = {
					has_building = building_commercial_zone
					NOT = { has_trade_designation = yes }
					OR = {
						AND = { 
							owner = { has_monthly_income = { resource = energy value > 50 } }
							owner = { has_resource = { type = energy amount > 100 } } # la distrugge se ha un ammontare 
						}
						AND = { 
							owner = { has_monthly_income = { resource = energy value > 0 } }
							owner = { has_resource = { type = energy amount > 3600 } } # la distrugge se ha un ammontare 
						}
						AND = { 
							owner = { has_monthly_income = { resource = energy value > 10 } }
							has_available_jobs = clerk
						}
					}
				 }
				remove_building = building_commercial_zone
				inline_script = "building_add/capital_universal" #add universal buildings
			}
			random_list = {
				50 = {
					modifier = {
						factor = 0
						free_building_slots <= 0
					}
					modifier = {
						factor = 0
						AND = {
							num_buildings = { type = building_autochthon_monument value < 1 }
							owner = {
								NOR = {
									is_spiritualist = yes
									is_megacorp = yes
								}
							}
						}
					}
					modifier = {
						factor = 0
						AND = {
							num_buildings = { type = building_temple value < 2 }
							owner = {
								is_spiritualist = yes
							}
						}
					}
					modifier = {
						factor = 0
						AND = {
							num_buildings = { type = building_corporate_monument value < 1 }
							owner = {
								is_megacorp = yes
							}
						}
					}
					modifier = {
						factor = 10
						AND = {
							num_buildings = { type = building_research_lab_1 value > 2 }
						}
					}
					add_building = building_research_lab_1
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				50 = {
					modifier = {
						factor = 0
						free_building_slots <= 0
					}
					modifier = {
						factor = 0
						AND = {
							num_buildings = { type = building_autochthon_monument value < 1 }
							owner = {
								NOR = {
									is_spiritualist = yes
									is_megacorp = yes
								}
							}
						}
					}
					modifier = {
						factor = 0
						AND = {
							num_buildings = { type = building_temple value < 2 }
							owner = {
								is_spiritualist = yes
							}
						}
					}
					modifier = {
						factor = 0
						AND = {
							num_buildings = { type = building_corporate_monument value < 1 }
							owner = {
								is_megacorp = yes
							}
						}
					}
					modifier = {
						factor = 10
						AND = {
							num_buildings = { type = building_research_lab_1 value > 2 }
						}
					}
					add_building = building_research_lab_1
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					modifier = {
						factor = 0
						free_building_slots <= 0
					}
					modifier = {
						factor = 0
						owner = {
							OR = {
								is_spiritualist = yes
								is_megacorp = yes
							}
						}
					}
					modifier = {
						factor = 0
						OR = {
							num_buildings = { type = building_autochthon_monument value > 0 }
							num_buildings = { type = building_galactic_memorial_1 value > 0 }
							num_buildings = { type = building_galactic_memorial_2 value > 0 }
							num_buildings = { type = building_galactic_memorial_3 value > 0 }
						}
					}
					add_building = building_autochthon_monument
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					inline_script = "building_add/holo"
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -400 } }
				}
				100 = {
					inline_script = "building_add/clinic" #mi sono stancato di fare script tutti uguali
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -400 } }
				}
				20 = {
					inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					modifier = {
						factor = 0
						free_building_slots <= 0
					}
					modifier = {
						factor = 0
						owner = { is_spiritualist = no }
					}
					modifier = {
						factor = 0
						OR = {
							num_buildings = { type = building_temple value > 1 }
						}
					}
					add_building = building_temple
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					modifier = {
						factor = 0
						free_building_slots <= 0
					}
					modifier = {
						factor = 0
						owner = {
							OR = {
								is_spiritualist = yes
								is_megacorp = no
							}
						}
					}
					modifier = {
						factor = 0
						num_buildings = { type = building_corporate_monument value > 1 }
					}
					add_building = building_corporate_monument
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_city value = 0 }
					}
					modifier = {
						factor = 0
						free_building_slots > 0
					}
					modifier = {
						factor = 10
						free_building_slots <= 0
						num_buildings = { type = any value < 12 }
					}
					modifier = {
						factor = 0.1 #for bug ai paradox
						num_unemployed < 1
					}
					modifier = {
						factor = 100
						free_housing < 0
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_mining value = 0 }
					}
					modifier = {
						factor = 100
						free_housing < 0
					}
					modifier = {
						factor = 0 #for bug ai paradox
						num_unemployed < 1
					}
					modifier = {
						factor = 10
						owner = { need_more_mineral = yes }
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					add_district = district_mining
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -300 } }
				}
				100 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_generator value = 0 }
					}
					modifier = {
						factor = 100
						free_housing < 0
					}
					modifier = {
						factor = 10
						owner = { has_monthly_income = { resource = energy value < 20 } }
					}
					#inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					add_district = district_generator
					add_modifier = { modifier = cg_ai0 days = 734 } 
					owner = { add_resource = { minerals = -300 } }
				}
				
			}
			planet_event = { 
				id = cg_ai.1001 #replace rare resource
			} 
			
		}
	}
}
country_event = {
	#	cg_ai.1	yearly checked - builds up the other planets of non gestalt empires
	
		id = cg_ai.1
		hide_window = yes
	
		is_triggered_only = yes
		
		trigger = {
			is_ai = yes
			is_country_type = default
			NOT = { has_ethic = ethic_gestalt_consciousness }
			any_owned_planet = {
				is_capital = no
				is_under_colonization = no
			}
			has_resource = { type = minerals amount > 500 }
			NOT = { has_global_flag = AI_easy }
		}
		immediate = {
			country_event = {
				id = cg_ai.101
				days = 5
			}	
		}
		
	}
country_event = {
#	cg_ai.101	yearly checked - builds up the other planets of non gestalt empires

	id = cg_ai.101
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		NOT = { has_ethic = ethic_gestalt_consciousness }
		any_owned_planet = {
			is_capital = no
			is_under_colonization = no
		}
		has_resource = { type = minerals amount > 500 }
		NOT = { has_global_flag = AI_easy }
	}
	
	immediate = {
		random_owned_planet = {
			limit = {
				is_capital = no
				free_jobs < 5
			}
			weights = {
				base = 1
				modifier = {
					factor = 100
					num_unemployed >= 0
				}
				modifier = {
					factor = 10
					free_jobs < 1
				}
				modifier = {
					factor = 10
					has_building_construction = no
				}
				
			}
			random_list = {
				20 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_generator value = 0 }
					}
					modifier = {
						factor = 0
						owner = { has_monthly_income = { resource = energy value > 20 } }
						NOR = {
							has_building = building_energy_grid
							has_building = building_energy_nexus
						}
					}
					modifier = {
						factor = 100
						owner = { has_monthly_income = { resource = energy value < 20 } }
					}
					modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					add_district = district_generator
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -300 } }
				}
				15 = {
					inline_script = "district_add/mining_weight" #mi sono stancato di fare script tutti uguali
					modifier = {
						factor = 0
						owner = { has_monthly_income = { resource = minerals value > 100 } }
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					add_district = district_mining
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -300 } }
				}
				20 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_farming value = 0 }
					}
					modifier = {
						factor = 0
						owner = { has_monthly_income = { resource = food value > 10 } }
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					add_district = district_farming
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -300 } }
				}
				20 = {
					inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				20 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_city value = 0 }
					}
					modifier = {
						factor = 0.1
						free_building_slots > 0
					}
					modifier = {
						factor = 0.1 #for bug ai paradox
						num_unemployed < 1
					}
					modifier = {
						factor = 100
						free_housing < 0
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				20 = {
					inline_script = "building_add/holo"
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -400 } }
				}
				100 = {
					inline_script = "building_add/clinic" #mi sono stancato di fare script tutti uguali
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -400 } }
				}
				100 = {
					inline_script = "building_add/foundry" #mi sono stancato di fare script tutti uguali
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
				100 = {
					modifier = {
						factor = 0
						free_building_slots <= 0
					}
					modifier = {
						factor = 0
						num_buildings = { type = building_factory_1 value > 0 }
					}
					modifier = {
						factor = 0
						owner = { 
							has_monthly_income = { resource = consumer_goods value > 5 } 
							has_monthly_income = { resource = minerals value < 20 } 
						}
					}
					add_building = building_factory_1
					add_modifier = { modifier = cg_ai1 days = 734 } 
					owner = { add_resource = { minerals = -500 } }
				}
			}
			planet_event = { 
				id = cg_ai.1001 #replace rare resource
			} 
		}
	}
}


country_event = {
#	cg_ai.4	yearly checked - market simulator for non gestalts empires

	id = cg_ai.4
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_global_flag = AI_hard
	}
	
	immediate = {
		while = {
			limit = {
				has_resource = { type = consumer_goods amount > 2000 }
				has_monthly_income = { resource = consumer_goods value > 0 }
			}
			add_resource = { consumer_goods = -200 }
			add_resource = { energy = 200 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 500 }
				has_resource = { type = food amount < 500 }
				has_monthly_income = { resource = food value < 0 }
				has_monthly_income = { resource = energy value > 0 }
			}
			add_resource = { food = 500 }
			add_resource = { energy = -500 }
		}
		
		if = {
			limit = {
				has_resource = { type = energy amount > 1500 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = minerals amount < 500 }
			}
			add_resource = { minerals = 500 }
			add_resource = { energy = -500 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 30 }
				has_monthly_income = { resource = energy value > 20 }
				has_resource = { type = minerals amount < 500 }
			}
			add_resource = { minerals = 20 }
			add_resource = { energy = -20 }
		}
		if = {
			limit = {
					has_resource = { type = energy amount > 30 }
					has_monthly_income = { resource = energy value > 30 }
					has_resource = { type = minerals amount < 500 }
			}
			add_resource = { minerals = 20 }
			add_resource = { energy = -20 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 1500 }
				has_monthly_income = { resource = energy value > 0 }
				has_monthly_income = { resource = consumer_goods value < 0 }
				has_resource = { type = consumer_goods amount < 200 }
			}
			add_resource = { consumer_goods = 12 }
			add_resource = { energy = -24 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 1500 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = minerals amount < 1000 }
			}
			add_resource = { minerals = 500 }
			add_resource = { energy = -500 }
		}
		if = {
			limit = {
				has_resource = { type = minerals amount > 12000 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = alloys amount < 10000 }
			}
			add_resource = { alloys = 300 }
			add_resource = { minerals = -2000 }
		}
		if = {
			limit = {
				has_resource = { type = minerals amount > 12000 }
				has_resource = { type = energy amount < 20000 }
			}
			add_resource = { energy = 2000 }
			add_resource = { minerals = -2000 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount < 1000 }
				has_monthly_income = { resource = energy value < 0 }
				has_resource = { type = alloys amount >= 15000 }
			}
			add_resource = { alloys = -2500 }
			add_resource = { energy = 12000 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 11000 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = alloys amount < 10000 }
			}
			add_resource = { alloys = 1000 }
			add_resource = { energy = -6000 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 1000 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = exotic_gases amount < 500 }
			}
			add_resource = { exotic_gases = 30 }
			add_resource = { energy = -100 }
		}
	}
}
country_event = {
	#	cg_ai.5	yearly checked - replace district and buildings
	
		id = cg_ai.5
		hide_window = yes
	
		is_triggered_only = yes
		
		trigger = {
			is_ai = yes
			is_country_type = default
			NOT = { has_ethic = ethic_gestalt_consciousness }
			NOT = { has_global_flag = AI_easy }
		}
		immediate = {
			country_event = {
				id = cg_ai.501
				days = 5
			}
		}
}

country_event = {
#	cg_ai.501 after 5 days	of cg_ai.5

	id = cg_ai.501
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_country_type = default
		NOT = { has_ethic = ethic_gestalt_consciousness }
		NOT = { has_global_flag = AI_easy }
	}
	
	immediate = {
		random_owned_planet = { #replace district
			limit = {
				is_capital = yes
				NOT = { is_planet_class = pc_habitat }
			}
			if = {
				limit = {
					OR = {
						owner = {
							
							NOT = { has_valid_civic = civic_agrarian_idyll }
							OR = {
								has_monthly_income = { resource = food value > 20 }
								AND = {
									has_monthly_income = { resource = food value > 5 }
									prev= {
										free_building_slots <= 0
										num_buildings = { type = any value < 12 }
									}
								}
							}
						}
						
					}
					num_districts = { type = district_farming value > 0 }
				}
				remove_district = district_farming
				random_list = {
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 20 } }
							NOR = {
								has_building = building_energy_grid
								has_building = building_energy_nexus
							}
						}
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					50 = {
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						add_modifier = { modifier = cg_ai5 days = 734 } 
						owner = { add_resource = { minerals = -200 } }
					}
					50 = {
						modifier = {
							factor = 0
							owner = { has_resource = { type = minerals amount < 200 } }
						}
						modifier = {
							factor = 0.1
							free_jobs > 1
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						modifier = {
							factor = 1000
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						owner = { add_resource = { minerals = -200 } }
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
				}
			}
			if = {
				limit = {
					OR = {
						owner = { has_monthly_income = { resource = minerals value > 100 } }
						AND = {
							owner = { has_monthly_income = { resource = minerals value > 50 } }
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
					}
					num_districts = { type = district_mining value > 0 }
				}
				remove_district = district_mining
				random_list = {
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = energy value > 20 } }
							NOR = {
								has_building = building_energy_grid
								has_building = building_energy_nexus
							}
						}
						
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					50 = {
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						add_modifier = { modifier = cg_ai5 days = 734 } 
						owner = { add_resource = { minerals = -200 } }
					}
					50 = {
						modifier = {
							factor = 0
							owner = { has_resource = { type = minerals amount < 200 } }
						}
						modifier = {
							factor = 0
							owner = { has_valid_civic = civic_agrarian_idyll }
							num_free_districts = { type = district_farming value > 0 }
						}
						modifier = {
							factor = 0.1
							free_jobs > 1
						}
						modifier = {
							factor = 1000
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						owner = { add_resource = { minerals = -200 } }
						add_modifier = { modifier = cg_ai5 days = 734 } 
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
					}
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_farming value = 0 }
						}
						modifier = {
							factor = 0
							owner = { NOT = { has_valid_civic = civic_agrarian_idyll } }
						}
						add_district = district_farming
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
				}
			}
			inline_script = "districts/replace_district_generator" #replace district generator 
			planet_event = { 
				id = cg_ai.1001 #replace rare resource
			}
		}
		random_owned_planet = { #replace district
			limit = {
				is_capital = no
				NOT = { is_planet_class = pc_habitat }
				NOT = { is_planet_class = pc_city } # ecumenopolis
			}
			if = {
				limit = {
					owner = {
						OR = {
							has_monthly_income = { resource = food value > 20 }
							AND = {
								has_monthly_income = { resource = food value > 5 }
								prev= {
									free_building_slots <= 0
									num_buildings = { type = any value < 12 }
								}
							}
						}
						NOT = { has_valid_civic = civic_agrarian_idyll }
					}
					num_districts = { type = district_farming value > 0 }
				}
				remove_district = district_farming
				random_list = {
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = energy value > 20 } }
							NOR = {
								has_building = building_energy_grid
								has_building = building_energy_nexus
							}
						}
						
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					50 = {
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						add_modifier = { modifier = cg_ai5 days = 734 } 
						owner = { add_resource = { minerals = -200 } }
					}
					50 = {
						modifier = {
							factor = 0
							owner = { has_resource = { type = minerals amount < 200 } }
						}
						modifier = {
							factor = 0.1
							free_jobs > 1
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						modifier = {
							factor = 2
							pop_amount > 900
							free_housing < 20
						}
						modifier = {
							factor = 5
							pop_amount > 900
							free_housing < 10
						}
						modifier = {
							factor = 1000
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						owner = { add_resource = { minerals = -200 } }
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
				}
			}
			if = {
				limit = {
					owner = { 
						OR = {
							has_monthly_income = { resource = minerals value > 100 } 
							AND = {
								has_monthly_income = { resource = minerals value > 50 }
								prev= {
									free_building_slots <= 0
									num_buildings = { type = any value < 12 }
								}
							}
						}
					}
					num_districts = { type = district_mining value > 0 }
				}
				remove_district = district_mining
				random_list = {
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = energy value > 20 } }
							NOR = {
								has_building = building_energy_grid
								has_building = building_energy_nexus
							}
						}
						
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					50 = {
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						add_modifier = { modifier = cg_ai5 days = 734 } 
						owner = { add_resource = { minerals = -200 } }
					}
					50 = {
						modifier = {
							factor = 0
							owner = { has_resource = { type = minerals amount < 200 } }
						}
						modifier = {
							factor = 0
							owner = { has_valid_civic = civic_agrarian_idyll }
							num_free_districts = { type = district_farming value > 0 }
						}
						modifier = {
							factor = 0.1
							free_jobs > 1
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						modifier = {
							factor = 1000
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						owner = { add_resource = { minerals = -200 } }
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_farming value = 0 }
						}
						modifier = {
							factor = 0
							owner = { NOT = { has_valid_civic = civic_agrarian_idyll } }
						}
						add_district = district_farming
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
				}
			}
			if = {
				limit = {
					owner = { 
						OR = {
							has_monthly_income = { resource = minerals value < 0 } 
							has_monthly_income = { resource = energy value < 0 } 
						}
					}
					num_districts = { type = district_industrial value > 0 }
					
				}
				remove_district = district_industrial
				random_list = {
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = energy value > 20 } }
							NOR = {
								has_building = building_energy_grid
								has_building = building_energy_nexus
							}
						}
						modifier = {
							factor = 10
							owner = { has_monthly_income = { resource = energy value < 0 } }
						}
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					50 = {
						inline_script = "district_add/mining_weight" #mi sono stancato di fare script tutti uguali
						add_district = district_mining
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					10 = {
						modifier = {
							factor = 0
							owner = { has_valid_civic = civic_agrarian_idyll }
							num_free_districts = { type = district_farming value > 0 }
						}
						modifier = {
							factor = 0.1
							free_jobs > 1
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						modifier = {
							factor = 2
							pop_amount > 900
							free_housing < 20
						}
						modifier = {
							factor = 5
							pop_amount > 900
							free_housing < 10
						}
						modifier = {
							factor = 1000
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
					10 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_farming value = 0 }
						}
						modifier = {
							factor = 0
							owner = { NOT = { has_valid_civic = civic_agrarian_idyll } }
						}
						add_district = district_farming
						add_modifier = { modifier = cg_ai5 days = 734 } 
					}
				}
			}
			inline_script = "districts/replace_district_generator" #replace district generator 
		}
	}
}
country_event = {
	#	cg_ai.502 remove and replace rares useless districts for habitat
	
		id = cg_ai.502
		hide_window = yes
	
		is_triggered_only = yes
		
		trigger = {
			is_country_type = default
			NOT = { has_global_flag = AI_easy }
		}
		
		immediate = {
			random_owned_planet = { #replace district
				limit = {
					is_capital = yes
					is_planet_class = pc_habitat
					num_unemployed < 3
				}
				inline_script = "districts/remove_hab" #rimuove district habitt inutili
				planet_event = { 
					id = cg_ai.1001 #replace rare resource
				}
			}
			random_owned_planet = { #replace district
				limit = {
					is_capital = no
					is_planet_class = pc_habitat
					num_unemployed < 3
				}
				inline_script = "districts/remove_hab" #rimuove district habitt inutili
				planet_event = { 
					id = cg_ai.1001 #replace rare resource
				}
			}
		}
}
country_event = {
#	cg_ai.7	yearly checked - better starbases

	id = cg_ai.7
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
	}
	
	immediate = {
		if = {
			limit = { has_technology = "tech_hydroponics" }
			every_owned_starbase = {
				limit = { 
					has_starbase_building = listening_post 
					NOT = { has_starbase_building = hydroponics_bay } #eliminate redudancy
				}
				remove_starbase_building = { building = listening_post }
			}
		}
		if = { 
			limit = { 
				NOT = {
					any_owned_starbase = { 
						OR = {
							has_starbase_module = shipyard  
						}
					}
				}
			}
			random_owned_starbase = {
				limit = {
					has_starbase_module = anchorage 
					count_starbase_modules = { include_being_constructed = yes count > 0 }
				}
				set_starbase_module = { slot = 1 module = shipyard }
			}
		}
	}
}

country_event = {
#	cg_ai.8	#yearly checked - building assault armies

	id = cg_ai.8
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		years_passed > 20
		fleet_power > 5000
		OR = {
			num_armies < 10
			AND = { 
				has_ai_expansion_plan = yes
				num_armies < 20
			}
		}
		has_resource = { type = minerals amount > 2000 }
		has_monthly_income = { resource = energy value > 40 }
		NOR = { 
			has_ai_personality = erudite_explorers
			has_ai_personality = hive_mind
			has_ai_personality = peaceful_traders
			has_ai_personality = peaceful_researcher
			has_global_flag = AI_easy 
		}
	}
	immediate = {
		capital_scope = {
			if = { limit = { has_orbital_bombardment = no is_occupied_flag = no }
				while = {
					count = 5
					create_army = {
						name = random
						owner = root
						species = root
						type = "assault_army"
					}
					owner = { add_resource = { minerals = -200 } }
				}
			}
		}
	}
}

country_event = {
#	cg_ai.9	#monthly checked - destroy "lost cause" starbases

	id = cg_ai.9
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		is_at_war = yes
	}
	immediate = {
		random_list = {
			50 = {
				modifier = {
					factor = 0.5
					has_global_flag = AI_normal
				}
				modifier = {
					factor = 0.25
					has_global_flag = AI_easy
				}
				every_owned_starbase = {
					limit = {
						exists = controller 
						controller = {
							is_same_value = root
						}
						OR = {
							AND = {
								has_starbase_size = starbase_starport
								solar_system = {
									is_capital_system = no
									NOT = {
										any_fleet_in_system = {
										exists = owner
										owner = { is_at_war_with = root }
										}
									}
									# NOT = {
									# 	any_fleet_in_system = {
									# 		exists = owner
									# 		owner = { is_same_value = root }
									# 		NOT = { is_same_value = prev }
									# 		fleet_power > 6000
									# 	}
									# }
									any_neighbor_system = {
										any_fleet_in_system = {
											exists = owner
											owner = { is_at_war_with = root }
											fleet_power > 4000
										}
									}
								}
							}
							AND = {
								has_starbase_size = starbase_starhold
								solar_system = {
									is_capital_system = no
									NOT = {
										any_fleet_in_system = {
										exists = owner
										owner = { is_at_war_with = root }
										}
									}
									# NOT = {
									# 	any_fleet_in_system = {
									# 		exists = owner
									# 		owner = { is_same_value = root }
									# 		NOT = { is_same_value = prev }
									# 		fleet_power > 6000
									# 	}
									# }
									any_neighbor_system = {
										any_fleet_in_system = {
											exists = owner
											owner = { is_at_war_with = root }
											fleet_power > 10000
										}
									}
								}
							}
							AND = {
								has_starbase_size = starbase_starfortress
								solar_system = {
									is_capital_system = no
									NOT = {
										any_fleet_in_system = {
										exists = owner
										owner = { is_at_war_with = root }
										}
									}
									# NOT = {
									# 	any_fleet_in_system = {
									# 		exists = owner
									# 		owner = { is_same_value = root }
									# 		NOT = { is_same_value = prev }
									# 		fleet_power > 8000
									# 	}
									# }
									any_neighbor_system = {
										any_fleet_in_system = {
											exists = owner
											owner = { is_at_war_with = root }
											fleet_power > 15000
										}
									}
								}
							}
							AND = {
								has_starbase_size = starbase_citadel
								solar_system = {
									is_capital_system = no
									NOT = {
										any_fleet_in_system = {
										exists = owner
										owner = { is_at_war_with = root }
										}
									}
									# NOT = {
									# 	any_fleet_in_system = {
									# 		exists = owner
									# 		owner = { is_same_value = root }
									# 		NOT = { is_same_value = prev }
									# 		fleet_power > 10000
									# 	}
									# }
									any_neighbor_system = {
										any_fleet_in_system = {
											exists = owner
											owner = { is_at_war_with = root }
											fleet_power > 20000
										}
									}
								}
							}
						}
					}
					remove_starbase_module = { }
					remove_starbase_building = { slot = all }
					set_starbase_size = starbase_outpost
				}
			 }
			50 = { }
		}
		
	}
}

country_event = {
#	cg_ai.10	#yearly checked - send alloys to fed prez

	id = cg_ai.10
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		is_homicidal = no
		is_subject = no
		has_federation = yes
		is_federation_leader = no
		has_resource = { type = alloys amount > 500 }
		has_monthly_income = { resource = alloys value > 10 }
		NOT = { has_global_flag = AI_easy }
	}
	
	immediate = {
		random_federation_ally = {
			limit = {
				is_federation_leader = yes
				is_ai = yes
				has_resource = { type = alloys amount < 10000 }
				has_monthly_income = { resource = alloys value < 200 }
			} 
			weights = {
				base = 1
				modifier = {
					factor = 2
					used_naval_capacity_percent < 0.5
				}
				modifier = {
					factor = 2
					used_naval_capacity_percent < 0.25
				}
				modifier = {
					factor = 10
					used_naval_capacity_percent < 0.1
				}
			}
			add_resource = { alloys = 250 }
			root = { add_resource = { alloys = -250 } }
			if = {
				limit = { 
				   root = { has_resource = { type = alloys amount > 1500 } }
			   }
			   add_resource = { alloys = 750 }
			   root = { add_resource = { alloys = -750 } }
		   }
		   if = {
				limit = { 
					is_at_war = yes
					root = { 
						has_resource = { type = alloys amount >= 1000 } 
						used_naval_capacity_percent > 0.75
					}
				}
				add_resource = { alloys = 750 }
				root = { add_resource = { alloys = -750 } }
	   	   }
		   
		}
	}
}

country_event = {
#	cg_ai.13	#yearly checked - shifts ethics towards fed type

	id = cg_ai.13
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		has_federation = yes
		NOT = { has_ethic = ethic_gestalt_consciousness }
		has_resource = { type = influence amount >= 500 }
		NOT = { has_global_flag = AI_easy }
		federation = { federation_cohesion_growth < 1 }
	}
	
	immediate = {
		if = {
			limit = {
				federation = { has_federation_type = trade_federation }
				NOT = { has_ethic = ethic_fanatic_xenophile }
			}
			shift_ethic = ethic_xenophile
			add_resource = { influence = -500 }
		}
		if = {
			limit = {
				federation = { has_federation_type = military_federation }
				NOT = { has_ethic = ethic_fanatic_militarist }
			}
			shift_ethic = ethic_militarist
			add_resource = { influence = -500 }
		}
		# if = {
		# 	limit = {
		# 		federation = { has_federation_type = pacifist_federation }
		# 		NOT = { has_ethic = ethic_fanatic_pacifist }
		# 	}
		# 	shift_ethic = ethic_pacifist
		# 	add_resource = { influence = -500 }
		# }
		if = {
			limit = {
				federation = { has_federation_type = spiritualist_federation }
				NOT = { has_ethic = ethic_fanatic_spiritualist }
			}
			shift_ethic = ethic_spiritualist
			add_resource = { influence = -500 }
		}
		if = {
			limit = {
				federation = { has_federation_type = research_federation }
				NOT = { has_ethic = ethic_fanatic_materialist }
			}
			shift_ethic = ethic_materialist
			add_resource = { influence = -500 }
		}
		if = {
			limit = {
				federation = { has_federation_type = hegemony_federation }
				NOT = { has_ethic = ethic_fanatic_authoritarian }
			}
			shift_ethic = ethic_authoritarian
			add_resource = { influence = -500 }
		}
		# if = {
		# 	limit = {
		# 		federation = { has_federation_type = egalitarian_federation }
		# 		NOT = { has_ethic = ethic_fanatic_egalitarian }
		# 	}
		# 	shift_ethic = ethic_egalitarian
		# 	add_resource = { influence = -500 }
		# }
	}
}

country_event = {
#	cg_ai.14	monthly checked - scorched earth tactics

	id = cg_ai.14
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		is_at_war = yes
		NOT = { has_global_flag = AI_easy }
	}
	
	immediate = {
		random_list = {
			10 = {
				modifier = {
					factor = 9
					has_global_flag = AI_hard
				}
				every_owned_fleet = {
					limit = {
						OR = {
							is_ship_size = mining_station
							is_ship_size = research_station
							is_ship_size = observation_station
						}
						solar_system = {
							NOT = { owner = { is_same_value = root } }
						}
					}
					destroy_fleet = this
				}
			}
			90 = {}
		}
		
	}
}


country_event = {
#	cg_ai.16	#yearly checked - market simulator for gestalts empires

	id = cg_ai.16
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		has_ethic = ethic_gestalt_consciousness
		has_global_flag = AI_hard
	}
	
	immediate = {
		if = {
			limit = {
				has_resource = { type = energy amount > 500 }
				has_resource = { type = food amount < 500 }
				has_monthly_income = { resource = food value < 0 }
				has_monthly_income = { resource = energy value > 0 }
			}
			add_resource = { food = 500 }
			add_resource = { energy = -500 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 1000 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = minerals amount < 500 }

			}
			add_resource = { minerals = 500 }
			add_resource = { energy = -500 }
		}
		if = {
			limit = {
				has_resource = { type = minerals amount > 12000 }
				has_monthly_income = { resource = energy value > 0 }
				has_resource = { type = alloys amount < 10000 }
			}
			add_resource = { alloys = 15 }
			add_resource = { minerals = -20 }
		}
		if = {
			limit = {
				has_resource = { type = minerals amount > 12000 }
				has_resource = { type = energy amount < 20000 }
			}
			add_resource = { energy = 2000 }
			add_resource = { minerals = -2000 }
		}
		if = {
			limit = {
				has_resource = { type = energy amount > 1000 }
				has_monthly_income = { resource = energy value > 10 }
				has_resource = { type = exotic_gases amount < 500 }
			}
			add_resource = { exotic_gases = 3 }
			add_resource = { energy = -10 }
		}
	}
}
country_event = {
	#	cg_ai.17	yearly checked - refines districts the capital planet of gestalt 
	
		id = cg_ai.17
		hide_window = yes
	
		is_triggered_only = yes
		
		trigger = {
			is_ai = yes
			is_country_type = default
			has_ethic = ethic_gestalt_consciousness
			NOT = { has_global_flag = AI_easy }
		}
		
		immediate = {
			random_owned_planet = { #replace district
				limit = {
					is_capital = yes
					NOT = { is_planet_class = pc_habitat }
				}
				if = {
					limit = {
						owner = {
							has_monthly_income = { resource = food value > 40 }
							NOT = { has_valid_civic = civic_agrarian_idyll }
						}
						num_districts = { type = district_farming value > 0 }
					}
					remove_district = district_farming
					random_list = {
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_generator value = 0 }
							}
							modifier = {
								factor = 0
								owner = { has_monthly_income = { resource = energy value > 20 } }
								NOR = {
									has_building = building_energy_grid
									has_building = building_energy_nexus
								}
							}
							modifier = {
								factor = 0
								free_jobs > 2
							}
							modifier = {
							factor = 3
							has_building = building_energy_grid
							}
							modifier = {
								factor = 5
								has_building = building_energy_nexus
							}
							modifier = {
								factor = 0.1
								owner = { has_monthly_income = { resource = energy value > 100 } }
							}
							modifier = {
								factor = 0.1
								owner = { has_monthly_income = { resource = energy value > 150 } }
							}
							add_district = district_generator
						}
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_mining value = 0 }
							}
							inline_script = "district_add/mining_weight" #mi sono stancato di fare script tutti uguali
							add_district = district_mining
						}
						50 = {
							modifier = {
								factor = 0
								owner = { has_resource = { type = minerals amount < 50 } }
							}
							modifier = {
								factor = 0.1
								free_jobs > 1
							}
							modifier = {
								factor = 10
								free_housing < 0
							}
							modifier = {
								factor = 10
								free_housing < 7
							}
							
							modifier = {
								factor = 1000
								free_building_slots <= 0
								num_buildings = { type = any value < 12 }
							}

							owner = { add_resource = { minerals = -200 } }
							inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						}
						50 = {
							inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
							owner = { add_resource = { minerals = -200 } }
						}
					}
				}
				if = {
					limit = {
						owner = { 
							OR = {
								has_monthly_income = { resource = minerals value > 120 } 
								AND = {
									has_monthly_income = { resource = minerals value > 50 }
									prev= {
										free_building_slots <= 0
										num_buildings = { type = any value < 12 }
									}
								}
							}
						}

						num_districts = { type = district_mining value > 0 }
					}
					remove_district = district_mining
					random_list = {
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_generator value = 0 }
							}
							modifier = {
								factor = 0
								owner = { has_monthly_income = { resource = energy value > 20 } }
								NOR = {
									has_building = building_energy_grid
									has_building = building_energy_nexus
								}
							}
							modifier = {
								factor = 0
								free_jobs > 2
							}
							modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						}
						50 = {
							modifier = {
								factor = 0
								owner = { has_resource = { type = minerals amount < 200 } }
							}
							modifier = {
								factor = 0.1
								free_jobs > 1
							}
							modifier = {
								factor = 0
								owner = { has_valid_civic = civic_agrarian_idyll }
								num_free_districts = { type = district_farming value > 0 }
							}
							modifier = {
								factor = 100
								free_housing < 0
							}
							modifier = {
								factor = 0
								free_building_slots > 0
								num_buildings = { type = any value = 12 }
							}
							modifier = {
								factor = 1000
								free_building_slots <= 0
								num_buildings = { type = any value < 12 }
							}
							owner = { add_resource = { minerals = -200 } }
							inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						}
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_farming value = 0 }
							}
							modifier = {
								factor = 0
								owner = { NOT = { has_valid_civic = civic_agrarian_idyll } }
							}
							modifier = {
								factor = 0
								owner = { country_uses_food = no }
							}
							
							add_district = district_farming
						}
						50 = {
							inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
							owner = { add_resource = { minerals = -200 } }
						}
					}
				}
				inline_script = "districts/replace_district_generator" #replace district generator 
			}
			random_owned_planet = { #replace district
				limit = {
					is_capital = no
					NOT = { is_planet_class = pc_habitat }
					NOT = { is_planet_class = pc_city } # ecumenopolis
				}
				if = {
					limit = {
						owner = {
							OR = {
								has_monthly_income = { resource = food value > 50 }
								AND = {
									has_monthly_income = { resource = food value > 25 }
									prev= {
										free_building_slots <= 0
										num_buildings = { type = any value < 12 }
									}
								}
							}
							NOT = { has_valid_civic = civic_agrarian_idyll }
						}
						num_districts = { type = district_farming value > 0 }
					}
					remove_district = district_farming
					random_list = {
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_generator value = 0 }
							}
							modifier = {
								factor = 0
								owner = { has_monthly_income = { resource = energy value > 20 } }
								NOR = {
									has_building = building_energy_grid
									has_building = building_energy_nexus
								}
							}
							modifier = {
								factor = 0
								free_jobs > 2
							}
							modifier = {
								factor = 3
								has_building = building_energy_grid
							}
							modifier = {
								factor = 5
								has_building = building_energy_nexus
							}
							modifier = {
								factor = 0.1
								owner = { has_monthly_income = { resource = energy value > 100 } }
							}
							modifier = {
								factor = 0.1
								owner = { has_monthly_income = { resource = energy value > 150 } }
							}
							add_district = district_generator
						}
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_mining value = 0 }
							}
							inline_script = "district_add/mining_weight" #mi sono stancato di fare script tutti uguali
							add_district = district_mining
						}
						50 = {
							modifier = {
								factor = 0
								owner = { has_resource = { type = minerals amount < 200 } }
							}
							modifier = {
								factor = 0.1
								free_jobs > 1
							}
							modifier = {
								factor = 100
								free_housing < 0
							}
							modifier = {
								factor = 1000
								free_building_slots <= 0
								num_buildings = { type = any value < 12 }
							}
							owner = { add_resource = { minerals = -200 } }
							inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						}
						100 = {
							inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
							owner = { add_resource = { minerals = -200 } }
						}
					}
				}
				if = {
					limit = {
						owner = { 
							OR = {
								has_monthly_income = { resource = minerals value > 120 }
								AND = {
									has_monthly_income = { resource = minerals value > 50 }
									prev= {
										free_building_slots <= 0
										num_buildings = { type = any value < 12 }
									}
								}
							}
							num_districts = { type = district_mining value > 0 }
						}
					}
					remove_district = district_mining
					random_list = {
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_generator value = 0 }
							}
							modifier = {
								factor = 0
								owner = { has_monthly_income = { resource = energy value > 20 } }
								NOR = {
									has_building = building_energy_grid
									has_building = building_energy_nexus
								}
							}
							modifier = {
								factor = 3
								has_building = building_energy_grid
							}
							modifier = {
								factor = 5
								has_building = building_energy_nexus
							}
							modifier = {
								factor = 0.1
								owner = { has_monthly_income = { resource = energy value > 100 } }
							}
							modifier = {
								factor = 0.1
								owner = { has_monthly_income = { resource = energy value > 150 } }
							}
							add_district = district_generator
						}
						50 = {
							modifier = {
								factor = 0
								owner = { has_resource = { type = minerals amount < 200 } }
							}
							modifier = {
								factor = 0
								owner = { has_valid_civic = civic_agrarian_idyll }
								num_free_districts = { type = district_farming value > 0 }
							}
							modifier = {
								factor = 0.1
								free_jobs > 1
							}
							modifier = {
								factor = 100
								free_housing < 0
							}
							modifier = {
								factor = 1000
								free_building_slots <= 0
								num_buildings = { type = any value < 12 }
							}
							owner = { add_resource = { minerals = -200 } }
							inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						}
						50 = {
							modifier = {
								factor = 0
								num_free_districts = { type = district_farming value = 0 }
							}
							modifier = {
								factor = 0
								owner = { NOT = { has_valid_civic = civic_agrarian_idyll } }
							}
							modifier = {
								factor = 10
								owner = { has_monthly_income = { resource = food value < 0 } }
							}
							add_district = district_farming
						}
						100 = {
							inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
							owner = { add_resource = { minerals = -200 } }
						}
					}
				}
				inline_script = "districts/replace_district_generator" #replace district generator 
			}
		}
	}
country_event = {
	#	cg_ai.20	yearly checked - replace up building of other planet gestalt empires
	
		id = cg_ai.20
		hide_window = yes
	
		is_triggered_only = yes
		
		trigger = {
			is_ai = yes
			is_country_type = default
			NOT = { has_country_flag = was_human }
			has_ethic = ethic_gestalt_consciousness
			has_resource = { type = minerals amount > 400 }
			has_monthly_income = { resource = energy value > 2 }
			NOT = { has_global_flag = AI_easy }
		}
		immediate = {
			random_owned_planet = {
				limit = {
					num_unemployed >= 10 # clean spawning_pool
				}
				random_list = {
					1 = { }
					50 = {
						modifier = {
							factor = 0
							OR = {
								is_capital = no
								pop_amount > 7000
								free_housing <= 0
							}
							num_buildings = { type = building_spawning_pool value = 0 }
						}
						remove_building = building_spawning_pool
						random_list = {
							50 = {
								inline_script = "building_add/foundry" #mi sono stancato di fare script tutti uguali
								
								owner = { add_resource = { minerals = -500 } }
							}
							50 = {
								modifier = {
									factor = 0
									free_building_slots <= 0
								}
								add_building = building_research_lab_1
								owner = { add_resource = { minerals = -500 } }
							}
						}
						add_modifier = { modifier = cg_ai20 days = 360 }
					}
					
				}
			}
			random_owned_planet = {
				limit = {
					pop_amount > 500
					is_capital = no
					NOT = { is_planet_class = pc_habitat }
					NOT = { has_modifier = cg_ai20 }
					free_jobs < 5
				}
				weights = {
					base = 1
					modifier = {
						factor = 10
						num_unemployed >= 0
					}
					modifier = {
						factor = 10
						free_jobs < 1
					}
				}
				random_list = {
					10 = {
						add_building = building_spawning_pool
						owner = { add_resource = { minerals = -300 } }
					}
					20 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = energy value > 20 } }
							NOR = {
								has_building = building_energy_grid
								has_building = building_energy_nexus
							}
						}
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						add_district = district_generator
						owner = { add_resource = { minerals = -300 } }
					}
					15 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_mining value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = minerals value > 100 } }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						inline_script = "district_add/mining_weight" #weight mining corretto
						add_district = district_mining
						owner = { add_resource = { minerals = -300 } }
					}
					20 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_farming value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = food value > 10 } }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						add_district = district_farming
						owner = { add_resource = { minerals = -300 } }
					}
					20 = {
						modifier = {
							factor = 0
							num_districts = { type = district_farming value = 0 }
						}
						modifier = {
							factor = 100
							owner = { has_monthly_income = { resource = food value > 50 } }
						}
						remove_district = district_farming
						owner = { add_resource = { minerals = 300 } }
					}
					40 = {
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						owner = { add_resource = { minerals = -500 } }
					}
					20 = {
						modifier = {
							factor = 0
							NOR = {
								num_free_districts = { type = district_city value > 0 }
								num_free_districts = { type = district_hive value > 0 }
								num_free_districts = { type = district_nexus value > 0 }
							}
						}
						modifier = {
							factor = 0.1
							free_building_slots > 0
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						modifier = {
							factor = 10
							pop_amount > 900
							free_housing < 10
						}
						modifier = {
							factor = 10
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						owner = { add_resource = { minerals = -500 } }
					}
					100 = {
						inline_script = "building_add/foundry" #mi sono stancato di fare script tutti uguali
						owner = { add_resource = { minerals = -500 } }
					}
				}
				add_modifier = { modifier = cg_ai20 days = 360 }
			}
			random_owned_planet = {
				limit = {
					is_capital = yes
					NOT = { is_planet_class = pc_habitat }
					NOT = { has_modifier = cg_ai20 }
					free_jobs < 5
				}
				random_list = {
					100 = {
						modifier = {
							factor = 0
							free_building_slots <= 0
						}
						modifier = {
							factor = 10
							AND = {
								num_buildings = { type = building_research_lab_1 value > 2 }
							}
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = energy value < 8 } }
						}
						add_building = building_research_lab_1
						owner = { add_resource = { minerals = -500 } }
					}
					100 = {
						modifier = {
							factor = 0
							owner = { is_hive_empire = no }
						}
						modifier = {
							factor = 0
							num_free_districts = { type = district_hive value = 0 }
						}
						modifier = {
							factor = 0
							free_building_slots > 0
						}
						modifier = {
							factor = 2
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						add_district = district_hive
						owner = { add_resource = { minerals = -500 } }
					}
					100 = {
						modifier = {
							factor = 0
							owner = { is_machine_empire = no }
						}
						modifier = {
							factor = 0
							num_free_districts = { type = district_nexus value = 0 }
						}
						modifier = {
							factor = 0
							free_building_slots > 0
						}
						modifier = {
							factor = 2
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						add_district = district_nexus
						owner = { add_resource = { minerals = -500 } }
					}
					100 = {
						modifier = {
							factor = 0.1
							owner = { is_hive_empire = yes }
						}
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						owner = { add_resource = { minerals = -500 } }
					}
					75 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_mining value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = minerals value > 100 } }
						}
						inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
						inline_script = "district_add/mining_weight" #mi sono stancato di fare script tutti uguali
						add_district = district_mining
						owner = { add_resource = { minerals = -300 } }
					}
				}
				add_modifier = { modifier = cg_ai20 days = 360 }
			}
		}
	}

country_event = {
	
	#	cg_ai.40	YEARLI Mid game events
	
	id = cg_ai.40
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		years_passed > 20
		is_ai = yes
		is_country_type = default
		has_resource = { type = minerals amount >= 400 }
		has_monthly_income = { resource = minerals value > 10 } 
		NOT = { has_global_flag = AI_easy }
	}
	immediate = { 
		# country_event = {  #replace city
		# 	id = cg_ai.41
		# 	days = 3 #Alleggerisce il carico nelle multiplayer
		# } 
		country_event = { #	cg_ai.42	YEARLI Universally remove/replace pop assembly
			id = cg_ai.42
			days = 4 #Alleggerisce il carico nelle multiplayer
		}
		country_event = { #	cg_ai.43	YEARLI Universally remove/replace holo / ameninties building useless
			id = cg_ai.43
			days = 6 #Alleggerisce il carico nelle multiplayer
		} 
		country_event = { #	cg_ai.44	YEARLI Universally upgrade buildings
			id = cg_ai.44
			days = 8 #Alleggerisce il carico nelle multiplayer
		} 
		country_event = { #	cg_ai.45	universal remove building_bureaucratic_1
			id = cg_ai.45
			days = 10 #Alleggerisce il carico nelle multiplayer
		} 
		country_event = { #	cg_ai.46	replace with archeo refinery
			id = cg_ai.46
			days = 12 #Alleggerisce il carico nelle multiplayer
		} 
		
	}
}
country_event = {#	cg_ai.41	YEARLI Mid game District update only not artificial planet
	
	id = cg_ai.41
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_primitive = no
		has_resource = { type = minerals amount >= 400 }
		has_monthly_income = { resource = minerals value > 10 } 
	}
	
	immediate = {
		every_owned_planet = {
			limit = {
				OR = {
					num_unemployed > 1
					free_jobs < 4 # if free jobs is < 2 (4-work police) probably use work clerk.
				}
				check_variable_arithmetic = { which = value:bslot_capacity_ai value > 12 }
				Can_remove_district_city = yes
			}
			if = { limit = { has_resource = { type = minerals amount >= 400 } }
			
				if = {
					limit = { has_district = district_city}
					remove_district = district_city
				}
				else_if = {
					limit = { has_district = district_hive}
					remove_district = district_hive
				}
				else_if = {
					limit = { has_district = district_nexus}
					remove_district = district_nexus
				}
				else_if = {
					limit = { has_district = district_crashed_slaver_ship}
					remove_district = district_crashed_slaver_ship
				}
				
				random_list = {
					20 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_generator value = 0 }
						}
						modifier = {
							factor = 0.1
							owner = { 
								is_machine_empire = no
								has_monthly_income = { resource = energy value > 50 } 
							}
						}
						modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
						owner = { add_resource = { minerals = -300 } }
					}
					15 = {
						inline_script = "district_add/mining_weight" #weight add mining
						add_district = district_mining
						owner = { add_resource = { minerals = -300 } }
					}
					15 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_farming value = 0 }
						}
						modifier = {
							factor = 0.1
							owner = { 
								is_hive_empire = yes
								has_monthly_income = { resource = food value > 10 } 
							}
						}
						modifier = {
							factor = 20
							owner = { 
								has_monthly_income = { resource = food value < 1 } 
							}
						}
						add_district = district_farming
						owner = { add_resource = { minerals = -300 } }
					}
					20 = {
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						owner = { add_resource = { minerals = -500 } }
					}
				}
				if = { 
					limit = { owner = { has_tradition = tr_adaptability_recycling  } }
					owner = { 
						add_resource = { minerals = 45 } 
					}
				}
			}
		}
	}
}
country_event = {#	cg_ai.42	YEARLI Universally remove/replace pop assembly
	
	
	
	id = cg_ai.42
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		has_resource = { type = minerals amount >= 500 }
	}
	
	immediate = {
		every_owned_planet = {
			limit = {
				Planet_need_work_job = yes
				has_pop_assembly_buildings = yes
				#has_resource = { type = minerals amount >= 400 }
			}
			if = {
				limit = { has_building = building_machine_assembly_complex }
				remove_building = building_machine_assembly_complex
			}
			else_if = {
				limit = { has_building = building_machine_assembly_plant }
				remove_building = building_machine_assembly_plant
			}
			else_if = {
				limit = { has_building = building_robot_assembly_complex }
				remove_building = building_robot_assembly_complex
			}
			else_if = {
				limit = { has_building = building_robot_assembly_plant }
				remove_building = building_robot_assembly_plant
			}
			else_if = {
				limit = { has_building = building_spawning_pool }
				remove_building = building_spawning_pool
			}
			else_if = {
				limit = { has_building = building_offspring_nest }
				remove_building = building_offspring_nest
			}
			else_if = {
				limit = { has_building = building_clone_vats }
				remove_building = building_clone_vats
			}
			if = { 
				limit = { owner = { has_tradition = tr_adaptability_recycling  } }
				owner = { 
					add_resource = { minerals = 60 } 
					if = { 
						limit = { owner = { is_machine_empire = yes } }
						add_resource = { minerals = 30 }
					}
				}
			}
			
			random_list = {
				99 = {
					modifier = {
						factor = 0
						owner = { has_resource = { type = minerals amount < 500 } }
					}
					inline_script = "building_add/universal" #mi sono stancato di fare script tutti uguali
					
					add_modifier = { modifier = cg_auto_ai_malus days = 730 } 
				}
				1 = {}
			}
		}
		
	}
	
}
country_event = {#	cg_ai.43	YEARLI Universally remove/replace holo / ameninties building useless
	
	
	
	id = cg_ai.43
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		has_resource = { type = minerals amount >= 500 }
	}
	immediate = {
		random_owned_planet = { #holo inutile
			limit = {
				OR = {
					planet_stability > 90
					free_amenities > 1300
				}
				has_building = building_holo_theatres
			}
			remove_building = building_holo_theatres
			random_list = {
				99 = {
					modifier = {
						factor = 0
						owner = { has_resource = { type = minerals amount < 500 } }
					}
					inline_script = "building_add/universal" #mi sono stancato di fare script tutti uguali
					
					add_modifier = { modifier = cg_ai42 days = 730 } 
				}
				1 = {}
			}
		}
	}
}
country_event = {#	cg_ai.44	YEARLI Universally upgrade buildings
	
	
	id = cg_ai.44
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_at_war = no
		has_resource = { type = minerals amount >= @b3_minerals }
		has_resource = { type = exotic_gases amount >= @b3_rare_cost }
		has_monthly_income = { resource = exotic_gases value > 2 }
		has_monthly_income = { resource = energy value > 10 }
		has_monthly_income = { resource = minerals value > 10 }
	}
	
	immediate = {
		#upgrade lab
		random_owned_planet = {
			limit = {#
				has_upgradable_research_labs = yes
				has_upgraded_capital = yes
				NOT = { has_modifier = cg_ai44 }
				OR = {
					num_unemployed > 0
					has_avaible_job_specialist = no
				}
			}
			weights = {
				base = 1
				modifier = { 
					factor = 10
					free_building_slots = 0
				}
				modifier = {
					factor = 100
					num_unemployed >= 0
				}
				modifier = {
					factor = 10
					free_jobs < 1
				}
			}
			
			if = {
				limit = { has_building = building_research_lab_1 }
				remove_building = building_research_lab_1
				owner = { add_resource = { minerals = @b2_minerals exotic_gases = @b2_rare_cost mult = -1 } }
				add_building = building_research_lab_2
				add_modifier = { modifier = cg_ai44 days = 730 }
			}
			else_if = {
				limit = { has_building = building_research_lab_2 }
				remove_building = building_research_lab_2
				owner = { add_resource = { minerals = @b3_minerals exotic_gases = @b3_rare_cost mult = -1 } }
				add_building = building_research_lab_3
				add_modifier = { modifier = cg_ai44 days = 1095 }
			}
		}
		if = {
			limit = { has_global_flag = AI_hard }
			every_owned_planet = {
				limit = {
					OR = {
						num_unemployed > 0
						has_avaible_job_specialist = no
					}
					has_upgradable_research_labs = yes
					has_upgraded_capital = yes
					NOT = { has_modifier = cg_ai44 }
				}
				if = {
					limit = { has_building = building_research_lab_1 }
					remove_building = building_research_lab_1
					owner = { add_resource = { minerals = @b2_minerals exotic_gases = @b2_rare_cost mult = -1 } }
					add_building = building_research_lab_2
					add_modifier = { modifier = cg_ai44 days = 730 }
				}
				else_if = {
					limit = { has_building = building_research_lab_2 }
					remove_building = building_research_lab_2
					owner = { add_resource = { minerals = @b3_minerals exotic_gases = @b3_rare_cost mult = -1 } }
					add_building = building_research_lab_3
					add_modifier = { modifier = cg_ai44 days = 1095 }
				}
			}
		}
	}
}
country_event = {#	cg_ai.45	universal remove building_bureaucratic_1
	
	
	id = cg_ai.45
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		has_resource = { type = minerals amount >= 500 }
		NOR = {
			has_valid_civic = civic_byzantine_bureaucracy 
			has_valid_civic = civic_efficient_bureaucracy 
			has_country_flag = cg_bad_tradition_score
			has_country_flag = cg_terrible_tradition_score
		}
	}
	
	immediate = {
		#upgrade lab
		every_owned_planet = {
			limit = {
				has_building = building_bureaucratic_1
				NOT = { has_designation = col_bureau }
				has_building_construction = no
			}
			remove_building = building_bureaucratic_1
			random_list = {
				99 = {
					inline_script = "building_add/universal" #mi sono stancato di fare script tutti uguali
					add_modifier = { modifier = cg_ai45 days = 730 } 
				}
				1 = {}
			}
		}
	}
}
country_event = {#	cg_ai.46	replace with archeo refinery
	
	
	id = cg_ai.46
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		has_resource = { type = minerals amount >= 500 }
		has_monthly_income = { resource = minerals value > 20 } 
		has_technology = tech_archaeo_refinery
	}
	
	immediate = {
		#upgrade lab
		every_owned_planet = {
			limit = {
				NOR = {
					has_modifier = resort_colony
					has_modifier = slave_colony
					#has_modifier = #crucible_colony
				}
				NOT = { has_building = building_archaeo_refinery }
				OR = {
					has_building = building_chemical_plant
					has_building = building_crystal_plant
					has_building = building_refinery
				}
			}
			if = {
				limit = {
					has_building = building_crystal_plant
				}
				remove_building = building_crystal_plant
			}else_if = {
				limit = {
					has_building = building_chemical_plant
				}
				remove_building = building_chemical_plant
			}else_if = {
				limit = {
					has_building = building_refinery
				}
				remove_building = building_refinery
			}
			add_building = building_archaeo_refinery
			owner = { add_resource = { minerals = -500 } }
			add_modifier = { modifier = cg_ai46 days = 730 } 
		}
	}
}

country_event = {#	cg_ai.50	Five years game events
	
	id = cg_ai.50
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
		has_resource = { type = minerals amount >= 200 }
		has_monthly_income = { resource = energy value > 0 } 
		NOT = { has_global_flag = AI_easy }
	}
	immediate = { 
		country_event = { 
			id = cg_ai.51 #FIVE YEAR Universally add district_city
			days = 15 #Alleggerisce il carico nelle multiplayer
		}
	}
}

country_event = {#	cg_ai.51	experimental FIVE YEAR Universally 
#add district_city
	
	id = cg_ai.51
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		owner = { has_resource = { type = minerals amount >= 500 } }
	}
	immediate = {
		random_owned_planet = {
			limit = {
				NOT = { is_planet_class = pc_habitat }
				free_jobs < 5
				NOT = { has_modifier = cg_ai50 }
			}
			weights = {
				base = 1
				modifier = {
					factor = 10
					num_unemployed >= 0
				}
				modifier = {
					factor = 10
					free_jobs < 1
				}
				modifier = {
					factor = 10
					has_building_construction = no
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						owner = { has_valid_civic = civic_agrarian_idyll }
						num_free_districts = { type = district_farming value > 0 }
					}
					modifier = {
						factor = 0
						NOR = {
							num_free_districts = { type = district_city value > 0 }
							num_free_districts = { type = district_hive value > 0 }
							num_free_districts = { type = district_nexus value > 0 }
							num_free_districts = { type = district_arcology_housing value > 0 }
							num_free_districts = { type = district_rw_city value > 0 }
						}
					}
					modifier = {
						factor = 0
						owner = { has_resource = { type = minerals amount < 200 } }
					}
					modifier = {
						factor = 100
						free_housing < 0
					}
					modifier = {
						factor = 2
						pop_amount > 900
						free_housing < 10
					}
					modifier = {
						factor = 5
						pop_amount > 900
						free_housing < 5
					}
					modifier = {
						factor = 1000
						free_building_slots <= 0
						num_buildings = { type = any value < 12 }
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
					owner = { add_resource = { minerals = -500 } }
					add_modifier = { modifier = cg_ai50 days = 734 } 
				}
				1 = {

				}
			}
		}
		random_owned_planet = {
			limit = {
				NOT = { is_planet_class = pc_habitat }
				free_jobs < 5
				NOT = { has_modifier = cg_ai50 }
			}
			weights = {
				base = 1
				modifier = {
					factor = 10
					num_unemployed >= 0
				}
				modifier = {
					factor = 10
					free_jobs < 1
				}
			}
			random_list = {
				10 = {
					modifier = {
						factor = 0
						owner = { has_resource = { type = minerals amount < 500 } }
					}
					modifier = {
						factor = 0
						owner = { has_valid_civic = civic_agrarian_idyll }
						num_free_districts = { type = district_farming value > 0 }
					}
					modifier = {
						factor = 0
						NOR = {
							num_free_districts = { type = district_city value > 0 }
							num_free_districts = { type = district_hive value > 0 }
							num_free_districts = { type = district_nexus value > 0 }
							num_free_districts = { type = district_arcology_housing value > 0 }
							num_free_districts = { type = district_rw_city value > 0 }
						}
					}
					modifier = {
						factor = 100
						free_housing < 0
					}
					modifier = {
						factor = 2
						free_housing < 10
					}
					modifier = {
						factor = 5
						free_housing < 5
					}
					modifier = {
						factor = 1000
						free_building_slots <= 0
						num_buildings = { type = any value < 12 }
					}
					inline_script = "planet/free_jobs" #controlla che ci siano veri free jobs.
					inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
					owner = { add_resource = { minerals = -500 } }
					add_modifier = { modifier = cg_ai50 days = 734 } 
				}
				1 = {

				}
			}
		}
	}
}
planet_event = { # cg_ai.60 add building or district universal minimum
	id = cg_ai.60
	hide_window = yes

	is_triggered_only = yes
	trigger = {
		pop_amount > 200
		owner = { 
			is_ai = yes 
			has_resource = { type = minerals amount >= 300 } 
		}
	}
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					OR = {
						free_building_slots <= 0
						has_resource = { type = minerals amount < 500 } 
					}
				}
				modifier = {
					factor = 0
					AND = {
						num_buildings = { type = building_autochthon_monument value < 1 }
						owner = {
							NOR = {
								is_spiritualist = yes
								is_megacorp = yes
							}
						}
					}
				}
				modifier = {
					factor = 0
					AND = {
						num_buildings = { type = building_temple value < 2 }
						owner = {
							is_spiritualist = yes
						}
					}
				}
				modifier = {
					factor = 0
					AND = {
						num_buildings = { type = building_corporate_monument value < 1 }
						owner = {
							is_megacorp = yes
						}
					}
				}
				modifier = {
					factor = 10
					AND = {
						num_buildings = { type = building_research_lab_1 value > 2 }
					}
				}
				add_building = building_research_lab_1
				owner = { add_resource = { minerals = -500 } }
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						free_building_slots <= 0
						has_resource = { type = minerals amount < 500 } 
					}
				}
				modifier = {
					factor = 0
					owner = {
						OR = {
							is_spiritualist = yes
							is_megacorp = yes
						}
					}
				}
				modifier = {
					factor = 0
					OR = {
						num_buildings = { type = building_autochthon_monument value > 0 }
						num_buildings = { type = building_galactic_memorial_1 value > 0 }
						num_buildings = { type = building_galactic_memorial_2 value > 0 }
						num_buildings = { type = building_galactic_memorial_3 value > 0 }
					}
				}
				add_building = building_autochthon_monument
				owner = { add_resource = { minerals = -500 } }
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						free_building_slots <= 0
						has_resource = { type = minerals amount < 400 } 
					}
				}
				inline_script = "building_add/holo"
				owner = { add_resource = { minerals = -400 } }
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						free_building_slots <= 0
						has_resource = { type = minerals amount < 400 } 
					}
				}
				inline_script = "building_add/clinic" #mi sono stancato di fare script tutti uguali
				owner = { add_resource = { minerals = -400 } }
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						free_building_slots <= 0
						has_resource = { type = minerals amount < 500 } 
					}
				}
				modifier = {
					factor = 0
					owner = { is_spiritualist = no }
				}
				modifier = {
					factor = 0
					OR = {
						num_buildings = { type = building_temple value > 1 }
					}
				}
				add_building = building_temple
				owner = { add_resource = { minerals = -500 } }
			}
			100 = {
				modifier = {
					factor = 0
					OR = {
						free_building_slots <= 0
						has_resource = { type = minerals amount < 500 } 
					}
				}
				modifier = {
					factor = 0
					owner = {
						OR = {
							is_spiritualist = yes
							is_megacorp = no
						}
					}
				}
				modifier = {
					factor = 0
					num_buildings = { type = building_corporate_monument value > 1 }
				}
				add_building = building_corporate_monument
				owner = { add_resource = { minerals = -500 } }
			}
			inline_script = "district_add/universal" #universal add district 
		}
		add_modifier = { modifier = cg_ai60 days = 734 } 
	}
}
country_event = { # cg_ai.61 Replace district for prepare for ap_arcology_project
	id = cg_ai.61
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		is_at_war = no
		NOT = { has_global_flag = AI_easy }
		#always = no #test in building
		is_ai = yes
		has_resource = { type = minerals amount >= 1000 } 
		has_ascension_perk = ap_arcology_project
		any_owned_planet = {
			is_artificial = no
			NOR = {
				is_planet_class = pc_city
				is_planet_class = pc_relic
				has_modifier = resort_colony
				has_modifier = penal_colony
				has_modifier = slave_colony
				has_modifier = pm_wenkwort_custodian
			}
			num_uncleared_blockers < 1
			free_district_slots < 1
			OR = {
				num_pops >= 70
				is_capital = yes
			}
		}
	}
	immediate = {
		random_owned_planet = { #replace district
			limit = { #candidate for acology project
				NOT = { has_modifier = cg_ai61 }
				NOT = { is_planet_class = pc_habitat }
				is_artificial = no
				NOR = {
					is_planet_class = pc_city
					is_planet_class = pc_relic
					has_modifier = resort_colony
					has_modifier = penal_colony
					has_modifier = slave_colony
					has_modifier = pm_wenkwort_custodian
				}
				num_uncleared_blockers < 1
				free_district_slots < 1
				OR = {
					num_pops >= 70
					is_capital = yes
				}
			}
			weights = {
				base = 1
				modifier = {
					factor = 0
					NOT = { has_planet_flag = candidate_arcology }
					owner = { any_owned_planet = { has_planet_flag = candidate_arcology } }
				}
			}
			if = {
				limit = {
					NOT = { has_modifier = cg_ai61 }
					OR = {
						AND = {
							owner = {
								has_monthly_income = { resource = food value > 20 }
							}
							num_districts = { type = district_farming value > 0 }
						}
						AND = {
							owner = {
								has_monthly_income = { resource = minerals value > 20 }
							}
							num_districts = { type = district_mining value > 0 }
						}
						AND = {
							owner = {
								has_monthly_income = { resource = energy value > 20 }
							}
							num_districts = { type = district_generator value > 0 }
						}
					}
				}
				if= { 
					limit = {
						owner = {
							has_monthly_income = { resource = food value > 20 }
						}
						num_districts = { type = district_farming value > 0 }
					}
					remove_district = district_farming
				}
				else_if = {
					limit = {
						owner = { has_monthly_income = { resource = minerals value > 20 } }
						num_districts = { type = district_mining value > 0 }
					}
					remove_district = district_mining
				}
				else_if = {
					limit = {
						owner = { has_monthly_income = { resource = energy value > 20 } }
						num_districts = { type = district_mining value > 0 }
					}
					remove_district = district_generator
				}
				if = { 
					limit = { owner = { has_tradition = tr_adaptability_recycling  } }
					owner = { 
						add_resource = { minerals = 45 } 
					}
				}
				set_planet_flag = candidate_arcology
				random_list = {
					50 = {
						modifier = {
							factor = 0
							num_free_districts = { type = district_industrial value = 0 }
						}
						modifier = {
							factor = 0
							owner = { has_monthly_income = { resource = minerals value < 30 } }
						}
						inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
						add_modifier = { modifier = cg_ai61 days = 359 } 
						owner = { add_resource = { minerals = -500 } }
					}
					50 = {
						modifier = {
							factor = 0.1
							free_jobs > 1
						}
						modifier = {
							factor = 100
							free_housing < 0
						}
						modifier = {
							factor = 1000
							free_building_slots <= 0
							num_buildings = { type = any value < 12 }
						}
						owner = { add_resource = { minerals = -500 } }
						inline_script = "district_add/add_district_city" #aggiunge distretto city in base a posto libero
						add_modifier = { modifier = cg_ai61 days = 359 } 
					}
				}
			}
			else_if = {
				limit = { has_planet_flag = candidate_arcology }
				remove_planet_flag = candidate_arcology
			}
		}
	}
}
#cg_ai.62 resettle for stab
country_event = {
	
    id = cg_ai.62
    hide_window = yes
    is_triggered_only = yes
	trigger = {
		is_ai = yes
		
		NOT = { has_global_flag = AI_easy }
		any_owned_planet = {
			any_owned_pop_group = { happiness >= 0.7 }
		}
		any_owned_planet = {
			planet_stability < 40
			num_unemployed = 0
		}
		OR = {
			AND = {
				has_policy_flag =  resettlement_not_allowed 
				has_country_resource = { type = energy amount > 1500}
			}
			AND = {
				OR = {
					has_policy_flag =  resettlement_allowed 
					has_ethic = "ethic_gestalt_consciousness"
				}
				has_country_resource = { type = energy amount > 500}
			}
		}
		resource_income_compare = {
			resource = energy
			value > 1
		}
		has_country_resource = { type = unity amount > 100 }
	}
    immediate = {
        random_owned_planet = { # search planet by start resettle
            limit = {
				is_occupied_flag = no
                any_owned_pop_group = { happiness >= 0.5 }
                has_orbital_bombardment = no
				pop_amount > 1000
				owner = { 
					OR = {
						AND = {
							has_policy_flag =  resettlement_not_allowed 
							has_country_resource = { type = energy amount > 1500 }
						}
						AND = {
							OR = {
								has_policy_flag =  resettlement_allowed 
								has_ethic = "ethic_gestalt_consciousness"
							}
							has_country_resource = { type = energy amount > 500 }
						}
					}
					has_country_resource = { type = unity amount > 100 }
				}
				check_variable = {
					which = recently_resettle_in # if recently resettle by automation will no send resettle for months.
					value = 0
				}
            }
			weights = {
				base = 1
				modifier = {
					factor = 10
					num_unemployed > 1
				}
				modifier = {
					factor = 2
					pop_amount > 3000
				}
				modifier = {
					factor = 2
					pop_amount > 6000
				}
			}
            #log = "-- Planet: [This.GetName]"
            random_owned_pop_group = {
				limit = {
					NOT = { is_pop_category = ruler } # ruler never move.
					happiness >= 0.51
					NOR = { 
						has_citizenship_type = { type = citizenship_assimilation }  # Ignore assimilating pops
						has_citizenship_type = { type = citizenship_slavery } # Ignore slave pops
						has_citizenship_type = { type = citizenship_purge_machine }
						has_citizenship_type = { type = citizenship_purge }
					}
					# owner = { 
					# 	has_country_resource = { type = energy amount > 500 mult = value:pop_resettlement_cost } 
					# }
                     # minimum of 1K energy to move pops
                    OR = {
                        has_migration_control = {
                            type = no
                        }
                        pop_group_has_trait = trait_machine_unit 
                        pop_group_has_trait = trait_mechanical 
                        # species = { has_trait = trait_machine_unit }
                        # species = { has_trait = trait_mechanical }
                    }
				}
				weights = {
					base = 1
					modifier = {
						factor = 2
						happiness >= 0.6
					}
					modifier = {
						factor = 2
						happiness >= 0.7
					}
				}
				cg_resettle_pop_for_stab = yes # resettle pop in other planet
				
			}
		}
		
    } 
}
country_event = {#	cg_ai.100 simulation market internal
	
	id = cg_ai.100
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_at_war = no
		is_country_type = default
		OR = {
			NOT = { 
				has_global_flag = galactic_market_founded
				is_galactic_community_member = yes
			}
			has_global_flag = AI_hard #little cheat but is minor cheat.
			OR = {
				has_civic = civic_fanatic_purifiers
				has_civic = civic_hive_devouring_swarm
				has_civic = civic_machine_terminator
			}
		}
		OR = {
			has_resource = { type = energy amount >= 500 }
			AND = {
				years_passed < 5
				has_resource = { type = energy amount >= 100 }
			}
		}
		
	}
	immediate = { 
		#cg
		if = {
			limit = {
				country_uses_consumer_goods = yes
				has_resource = { type = consumer_goods amount < 90 }
				has_monthly_income = { resource = consumer_goods value < 0 }
				has_monthly_income = { resource = energy value >= 65 } 
			}
			add_modifier = { modifier = consumer_goods_market days = 300 } 
		}
		else_if = {
			limit = {
				country_uses_consumer_goods = yes
				has_resource = { type = consumer_goods amount < 90 }
				has_monthly_income = { resource = consumer_goods value < 0 }
				has_monthly_income = { resource = energy value >= 27 } 
			}
			add_modifier = { modifier = consumer_goods_5_market days = 300 } 
		}
		else_if = { #food
				limit = {
					country_uses_food = yes
					has_resource = { type = food amount < 100 }
					has_monthly_income = { resource = food value < 1 }
					has_monthly_income = { resource = energy value >= 50 } 
				}
			add_modifier = { modifier = food_market days = 300 } 
		}
		else_if = { #minerals
			limit = {

				has_resource = { type = minerals amount < 2000 }
				has_monthly_income = { resource = minerals value < 30 }
				has_monthly_income = { resource = energy value >= 75 } 
			}
			add_modifier = { modifier = minerals_40_market days = 300 } 
		}
		else_if = { 
			limit = {

				has_resource = { type = minerals amount < 5000 }
				has_monthly_income = { resource = minerals value < 40 }
				has_monthly_income = { resource = energy value >= 50 } 
			}
			add_modifier = { modifier = minerals_20_market days = 300 } 
		}
		else_if = {
			limit = {
				has_monthly_income = { resource = minerals value < 50 }
				has_monthly_income = { resource = energy value >= 40 } 
			}
			add_modifier = { modifier = minerals_10_market days = 300 } 
		}
		if = {
			limit = {
				has_resource = { type = minerals amount < 2500 }
				has_monthly_income = { resource = energy value > 100 } 
			}
			if = {
				limit = { years_passed > 25 }
				add_modifier = { modifier = minerals_10_market days = 300 } 
			}
			else = { 
				add_modifier = { modifier = minerals_40_market days = 300 } 
			}
		}
		if = {
			limit = {
				has_resource = { type = alloys amount < 100 }
				has_monthly_income = { resource = energy value > 70 } 
				OR = {
					has_monthly_income = { resource = alloys value < 30 }
					is_at_war = yes
				}
				used_naval_capacity_percent < 0.5
			}
			if = {
				limit = { years_passed < 25 }
				add_modifier = { modifier = alloys_3_market days = 300 } 
			}
			else = { 
				add_modifier = { modifier = alloys_9_market days = 300 } 
			}
		}
	}
}
country_event = {#	cg_ai.102 best choice start game
	
	id = cg_ai.102
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_ai = yes
		is_country_type = default
	}
	immediate = { 
		#
		if = {
			limit = {
				has_resource = { type = alloys amount >= 100 }
			}
			add_resource = { alloys = -100 }
			add_resource = { energy = 276 } #for blocker
		}
	}
}
country_event = {
#	cg_ai.777	test event

	id = cg_ai.777
	
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		is_primitive = no
		is_country_type = default
	}
	
	immediate = {
		every_owned_planet = {
			limit = {
				OR = {
					num_unemployed > 1
					free_jobs < 4 # if free jobs is < 2 (4-work police) probably use work clerk.
				}
				check_variable_arithmetic = { which = value:bslot_capacity_ai value > 12 }
				Can_remove_district_city = yes
				owner = { has_resource = { type = minerals amount > 400 } }
			}
			if = {
				limit = { has_district = district_city}
				remove_district = district_city
			}
			else_if = {
				limit = { has_district = district_hive}
				remove_district = district_hive
			}
			else_if = {
				limit = { has_district = district_nexus}
				remove_district = district_nexus
			}
			else_if = {
				limit = { has_district = district_crashed_slaver_ship}
				remove_district = district_crashed_slaver_ship
			}
			
			random_list = {
				20 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_generator value = 0 }
					}
					modifier = {
						factor = 0.1
						owner = { 
							is_machine_empire = no
							has_monthly_income = { resource = energy value > 50 } 
						}
					}
					modifier = {
							factor = 3
							has_building = building_energy_grid
						}
						modifier = {
							factor = 5
							has_building = building_energy_nexus
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 100 } }
						}
						modifier = {
							factor = 0.1
							owner = { has_monthly_income = { resource = energy value > 150 } }
						}
						add_district = district_generator
					owner = { add_resource = { minerals = -300 } }
				}
				15 = {
					inline_script = "district_add/mining_weight" #weight add mining
					add_district = district_mining
					owner = { add_resource = { minerals = -300 } }
				}
				15 = {
					modifier = {
						factor = 0
						num_free_districts = { type = district_farming value = 0 }
					}
					modifier = {
						factor = 0.1
						owner = { 
							is_hive_empire = yes
							has_monthly_income = { resource = food value > 10 } 
						}
					}
					modifier = {
						factor = 20
						owner = { 
							has_monthly_income = { resource = food value < 1 } 
						}
					}
					add_district = district_farming
					owner = { add_resource = { minerals = -300 } }
				}
				20 = {
					inline_script = "district_add/industrial" #mi sono stancato di fare script tutti uguali
					owner = { add_resource = { minerals = -500 } }
				}
			}
			if = { 
				limit = { owner = { has_tradition = tr_adaptability_recycling  }}
				owner = { 
					add_resource = { minerals = 45 } 
				}
			}
		}
	}
}
planet_event = {
#	cg_ai.778	test event for planetsw
	
	id = cg_ai.778
	
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		owner = { has_resource = { type = minerals amount >= 200 } }
		OR = {
			num_unemployed > 0
			free_housing > 25
		}
		has_upgradable_research_labs = yes
		owner = {  
			has_resource = { type = minerals amount >= @b3_minerals }
			has_resource = { type = exotic_gases amount >= @b3_rare_cost }
			has_monthly_income = { resource = exotic_gases value > 2 }
			has_monthly_income = { resource = energy value > 10 }
		}
	}
	immediate = {
		random_list = {
			100 = {
				if = {
					limit = {
						OR = {
							num_unemployed > 0
							free_housing > 25
						}
						has_upgradable_research_labs = yes
						owner = {  
							has_resource = { type = minerals amount >= @b3_minerals }
							has_resource = { type = exotic_gases amount >= @b3_rare_cost }
							has_monthly_income = { resource = exotic_gases value > 2 }
							has_monthly_income = { resource = energy value > 10 }
						}
						has_upgraded_capital = yes
					}
					if = {
						limit = { has_building = building_research_lab_1 }
						remove_building = building_research_lab_1
						owner = { add_resource = { minerals = @b2_minerals exotic_gases = @b2_rare_cost mult = -1 } }
						add_building = building_research_lab_2
						add_modifier = { modifier = cg_ai44 days = 730 }
					}
					else_if = {
						limit = { has_building = building_research_lab_2 }
						remove_building = building_research_lab_2
						owner = { add_resource = { minerals = @b3_minerals exotic_gases = @b3_rare_cost mult = -1 } }
						add_building = building_research_lab_3
						add_modifier = { modifier = cg_ai44 days = 1095 }
					}
				}
			}
			1 = {

			}
		}
	}
}
planet_event = {
	#	cg_ai.1001	replace rare resource
	
		id = cg_ai.1001
		hide_window = yes
	
		is_triggered_only = yes
		
		trigger = {
			owner = {
				is_ai = yes
				is_country_type = default
				has_resource = { type = minerals amount > 500 }
				NOT = { has_global_flag = AI_easy }
			}
		}
		immediate = {
			if = {
				limit = {
					NOT = { has_modifier = cg_auto_remove_rare_resource }
					owner = { has_resource = { type = minerals amount >= 500 } }
				}
				if = { # sistema factory inutili ( solo livello 1 )
					limit = { 
						has_building = building_refinery
						need_remove_exotic_gases_building = yes
					}
					remove_building = building_refinery
					inline_script = "building_add/universalwr" #wr = with random
						
					add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
				}else_if = { # sistema factory inutili ( solo livello 1 )
					limit = { 
						has_building = building_chemical_plant
						need_remove_volatile_motes_building = yes
					}
					remove_building = building_refinery
					inline_script = "building_add/universalwr" #mi sono stancato di fare script tutti uguali
						
					add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
				}else_if = { # sistema factory inutili ( solo livello 1 )
					limit = { 
						has_building = building_crystal_plant
						need_remove_rare_crystals_building = yes
					}
					remove_building = building_refinery
					inline_script = "building_add/universalwr" #mi sono stancato di fare script tutti uguali
						
					add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
				}
			}
		}
}
country_event = {
	#	cg_ai.1001	replace rare resource other planets
	
	id = cg_ai.1002
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
			is_ai = yes
			is_country_type = default
			has_resource = { type = minerals amount > 500 }
			NOT = { has_global_flag = AI_easy }
			OR = {
				has_monthly_income = { resource = exotic_gases value > 5 }
				has_monthly_income = { resource = volatile_motes value > 5 }
				has_monthly_income = { resource = rare_crystals value > 5 }
			}
	}
	immediate = {
		if = {
			limit = { has_global_flag = AI_normal }
		
			random_owned_planet = {
				if = {
					limit = {
						is_capital = no
						NOT = { has_modifier = cg_auto_remove_rare_resource }
						owner = { has_resource = { type = minerals amount >= 500 } }
					}
					if = { # sistema factory inutili ( solo livello 1 )
						limit = { 
							has_building = building_refinery
							need_remove_exotic_gases_building = yes
						}
						remove_building = building_refinery
						#inline_script = "building_add/universalwr" #wr = with random
							
						#add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
					}else_if = { # sistema factory inutili ( solo livello 1 )
						limit = { 
							has_building = building_chemical_plant
							need_remove_volatile_motes_building = yes
						}
						remove_building = building_refinery
						#inline_script = "building_add/universalwr" #mi sono stancato di fare script tutti uguali
							
						#add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
					}else_if = { # sistema factory inutili ( solo livello 1 )
						limit = { 
							has_building = building_crystal_plant
							need_remove_rare_crystals_building = yes
						}
						remove_building = building_refinery
						#inline_script = "building_add/universalwr" #mi sono stancato di fare script tutti uguali
							
						#add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
					}
				}
			}
		}
		else = {
			every_owned_planet = {
				if = {
					limit = {
						is_capital = no
						NOT = { has_modifier = cg_auto_remove_rare_resource }
						owner = { has_resource = { type = minerals amount >= 500 } }
					}
					if = { # sistema factory inutili ( solo livello 1 )
						limit = { 
							has_building = building_refinery
							need_remove_exotic_gases_building = yes
						}
						remove_building = building_refinery
						inline_script = "building_add/universalwr" #wr = with random
							
						add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
					}else_if = { # sistema factory inutili ( solo livello 1 )
						limit = { 
							has_building = building_chemical_plant
							need_remove_volatile_motes_building = yes
						}
						remove_building = building_refinery
						inline_script = "building_add/universalwr" #mi sono stancato di fare script tutti uguali
							
						add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
					}else_if = { # sistema factory inutili ( solo livello 1 )
						limit = { 
							has_building = building_crystal_plant
							need_remove_rare_crystals_building = yes
						}
						remove_building = building_refinery
						inline_script = "building_add/universalwr" #mi sono stancato di fare script tutti uguali
							
						add_modifier = { modifier = cg_auto_remove_rare_resource days = 734 } 
					}
				}
			}
		}
	}
}