namespace = cg_flag_score
#getted by starnet
event = {
	#Determine what countries are ahead. 5 year pulse
	id = cg_flag_score.1
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = no
	immediate = {
		if = {
			limit = {
				years_passed > 30
			}
			every_country = {
				limit = {
					OR = { is_country_type = default is_ai = no }
				}
				country_event = {
					id = cg_flag_score.2 days = 1 random = 180
				}
			}
		}
	}
}

country_event = {
	id = cg_flag_score.2
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = no
	immediate = {
		remove_country_flag = cg_bad_fleet_score
		remove_country_flag = cg_bad_tech_score
		remove_country_flag = cg_bad_economy_score
		remove_country_flag = cg_terrible_fleet_score
		remove_country_flag = cg_terrible_tech_score
		remove_country_flag = cg_terrible_economy_score
		every_relation = { #prev Is I
			limit = {
				is_country_type = default
				NOT = { is_overlord_to = ROOT } #overlord is invalid
			}
			if = {
				limit = {
					relative_power = {
						who = prev
						category = fleet
						value > equivalent
					}
				}
				prev = { 
					set_country_flag = cg_bad_fleet_score 
				}
			}
			if = {
				limit = {
					relative_power = {
						who = prev
						category = technology
						value > equivalent
					}
				}
				prev = { 
					set_country_flag = cg_bad_tech_score 
				}
			}
			if = {
				limit = {
					relative_power = {
						who = prev
						category = economy
						value > equivalent
					}
				}
				prev = { 
					set_country_flag = cg_bad_economy_score 
				}
			}
			if = {
				limit = {
					relative_power = {
						who = prev
						category = fleet
						value > superior
					}
				}
				prev = { 
					set_country_flag = cg_terrible_fleet_score }
			}
			if = {
				limit = {
					relative_power = {
						who = prev
						category = technology
						value > superior
					}
				}
				prev = { set_country_flag = cg_terrible_tech_score }
			}
			if = {
				limit = {
					relative_power = {
						who = prev
						category = economy
						value > superior
					}
				}
				prev = { set_country_flag = cg_terrible_economy_score }
			}
			if = {
				limit = {
					OR = {
						AND = {
							prev = { num_ascension_perks < 2 }
							num_ascension_perks >= 2
						}
						AND = {  
							prev = { num_ascension_perks < 3 }  
							num_ascension_perks >= 3  
						}  
						
						AND = {  
							prev = { num_ascension_perks < 4 }  
							num_ascension_perks >= 4  
						}  
						
						AND = {  
							prev = { num_ascension_perks < 5 }  
							num_ascension_perks >= 5  
						}  
					}
				}
				prev = { set_country_flag = cg_bad_tradition_score }
			}
			if = {
				limit = {
					OR = {
						AND = {
							prev = { num_ascension_perks < 2 }
							num_ascension_perks > 2
						}
						AND = {  
							prev = { num_ascension_perks < 3 }  
							num_ascension_perks > 3  
						}  
						
						AND = {  
							prev = { num_ascension_perks < 4 }  
							num_ascension_perks > 4  
						}  
						
						AND = {  
							prev = { num_ascension_perks < 5 }  
							num_ascension_perks > 5  
						}  
					}
				}
				prev = { set_country_flag = cg_terrible_tradition_score }
			}
			
		}
	}
}
